# v2v-rhel10-nfc-download.yaml
# Goal: vSphere NFC lease download (NO virt-v2v, NO guest inspection)
#
# Notes:
# - NFC pulls via an HTTP(S) URL obtained from an NFC lease.
# - Output is typically “flat” VMDK bytes (good for later qemu-img convert).
# - This assumes you add/implement vs_action: nfc_download_disk (and optionally nfc_download_vm).

command: vsphere

# vCenter connection (pyvmomi control-plane)
vcenter: 10.73.213.134
vc_user: administrator@vsphere.local
vc_password_env: VC_PASSWORD
vc_insecure: true
dc_name: data

# Choose ONE:
#   nfc_download_disk  -> download a single disk by index/label
#   nfc_download_vm    -> download all disks for a VM
vs_action: nfc_download_disk

vm_name: esx8.0-rhel10.0beta-x86_64-efi

# Disk selector (pick one style your code supports)
disk: 0
# or:
# label_or_index: "Hard disk 1"

# Where to write the downloaded bytes
local_path: ./downloads/esx8.0-rhel10.0beta-x86_64-efi/disk0-flat.vmdk

# Optional tuning knobs (only if you wire them up)
chunk_size: 4194304     # 4MiB chunks (HTTP streaming)
# vs_http_timeout: "10,600"   # connect,read seconds (example)
# vs_http_retries: 3
# vs_http_backoff: 1.5

# Logging / output
verbose: 2
json: false

